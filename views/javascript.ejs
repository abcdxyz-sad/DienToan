<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
	(function () {
		'use strict';
		const forms = document.querySelectorAll('.needs-validation');
		Array.from(forms).forEach(form => {
			form.addEventListener('submit', event => {
				if (!form.checkValidity()) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		});
	})();
</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
	(function () {
		'use strict';
		const forms = document.querySelectorAll('.needs-validation');
		Array.from(forms).forEach(form => {
			form.addEventListener('submit', event => {
				if (!form.checkValidity()) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		});
	})();
</script>

<script>
	document.addEventListener('DOMContentLoaded', function () {
	  const toggleCheckbox = document.getElementById('togglePassword');
	  if (toggleCheckbox) {
		toggleCheckbox.addEventListener('change', function () {
		  const passwordInput = document.querySelector('input[name="MatKhau"]');
		  const confirmPasswordInput = document.querySelector('input[name="XacNhanMatKhau"]');
  
		  const type = this.checked ? 'text' : 'password';
		  if (passwordInput) passwordInput.type = type;
		  if (confirmPasswordInput) confirmPasswordInput.type = type;
		});
	  }
	});
  </script>
  
  <script src="https://cdn.ckeditor.com/4.22.1/full/ckeditor.js"></script>
<script>
    // Khởi tạo CKEditor
    CKEDITOR.replace('NoiDung', {
        customConfig: 'http://127.0.0.1:3000/js/config.js'
    });

    // Kiểm tra form và CKEditor khi submit
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('.needs-validation');

        form.addEventListener('submit', function (event) {
            // Lấy nội dung từ CKEditor
            const noiDung = CKEDITOR.instances.NoiDung.getData().trim();

            // Kiểm tra hợp lệ
            if (!form.checkValidity() || noiDung === "") {
                event.preventDefault();
                event.stopPropagation();

                // Hiển thị lỗi cho CKEditor (thủ công)
                const textArea = document.getElementById('NoiDung');
                textArea.classList.add('is-invalid');
            } else {
                // Đảm bảo textarea có dữ liệu để gửi đi
                CKEDITOR.instances.NoiDung.updateElement();
            }

            form.classList.add('was-validated');
        });
    });
</script>
